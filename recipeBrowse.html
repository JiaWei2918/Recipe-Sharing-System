<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browse Recipes</title>
    <link rel="stylesheet" href="https://fonts.bunny.net/css?family=lora:400,400i,700,700i|playfair-display:400,700|poppins:400|roboto-condensed:400,700">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="recipeBrowse.css">
    <link rel="stylesheet" href="sidebar.css">
</head>
<body>
    <div id="sidebar-placeholder"></div>

    <div class="row">
        <div class="search-bar">
            <input type="text" placeholder="Search for recipes or ingredients...">
            <button>Search<i class="fa fa-search"></i></button>
        </div>
        <div class="actions">
            <button>Share on Facebook</button>
            <button>Create Event</button>
        </div>
    </div>
    
    <div class="recipe-list">
        <div class="recipe-card">
            <img src="apple-pie.jpg" alt="Classic Apple Pie">
            <div class="recipe-info">
                <h2>Classic Apple Pie</h2>
                <p class="category">Dessert</p>
                <p class="source">From: Fine Cooking</p>
                <div class="rating">Rating: ★★★★★</div>
                <p class="ingredients">13 Ingredients</p>
            </div>
        </div>

        <div class="recipe-card" onclick="window.location.href='recipeDetails.html'">
            <img src="fish-and-chips.jpg" alt="Fish & Chips">
            <div class="recipe-info">
                <h2>Fish & Chips</h2>
                <p class="category">Main</p>
                <p class="source">From: British Cuisine</p>
                <div class="rating">Rating: ★★★★☆</div>
                <p class="ingredients">8 Ingredients</p>
            </div>
        </div>

        <div class="recipe-card">
            <img src="spaghetti.jpg" alt="Spaghetti Carbonara">
            <div class="recipe-info">
                <h2>Spaghetti Carbonara</h2>
                <p class="category">Main</p>
                <p class="source">From: Italian Cuisine</p>
                <div class="rating">Rating: ★★★★★</div>
                <p class="ingredients">6 Ingredients</p>
            </div>
        </div>

        <div class="recipe-card">
            <img src="grilled-cheese.jpg" alt="Grilled Cheese">
            <div class="recipe-info">
                <h2>Grilled Cheese</h2>
                <p class="category">Snack</p>
                <p class="source">From: Comfort Foods</p>
                <div class="rating">Rating: ★★★★☆</div>
                <p class="ingredients">4 Ingredients</p>
            </div>
        </div>
        
        <div class="recipe-card">
            <img src="caesar-salad.jpg" alt="Caesar Salad">
            <div class="recipe-info">
                <h2>Caesar Salad</h2>
                <p class="category">Side</p>
                <p class="source">From: Healthy Choices</p>
                <div class="rating">Rating: ★★★★☆</div>
                <p class="ingredients">7 Ingredients</p>
            </div>
        </div>
    </div>

    <div class="recipe-list" id="recipeList"></div>

    <script>
        function loadRecipes() {
            const recipes = JSON.parse(localStorage.getItem('recipes')) || [];
            const recipeListContainer = document.getElementById('recipeList');

            recipeListContainer.innerHTML = '';

            recipes.forEach(recipe => {

                const recipeCard = document.createElement('div');
                recipeCard.classList.add('recipe-card');

                const recipeImage = document.createElement('img');
                recipeImage.src = recipe.imageBase64 || 'default-image.jpg';
                recipeImage.alt = recipe.title;

                const recipeInfo = document.createElement('div');
                recipeInfo.classList.add('recipe-info');

                const recipeTitle = document.createElement('h2');
                recipeTitle.textContent = recipe.title;

                const recipeCategory = document.createElement('p');
                recipeCategory.classList.add('category');
                recipeCategory.textContent = 'Category: ' + (recipe.category || 'N/A');

                const recipeSource = document.createElement('p');
                recipeSource.classList.add('source');
                recipeSource.textContent = 'From: ' + (recipe.source || 'N/A');

                const recipeRating = document.createElement('div');
                recipeRating.classList.add('rating');
                recipeRating.textContent = 'Rating: ' + (recipe.rating || 'N/A');

                const recipeIngredients = document.createElement('p');
                recipeIngredients.classList.add('ingredients');
                recipeIngredients.textContent = 'Ingredients: ' + (recipe.ingredients.join(', ') || 'N/A');

                recipeInfo.appendChild(recipeTitle);
                recipeInfo.appendChild(recipeCategory);
                recipeInfo.appendChild(recipeSource);
                recipeInfo.appendChild(recipeRating);
                recipeInfo.appendChild(recipeIngredients);

                recipeCard.appendChild(recipeImage);
                recipeCard.appendChild(recipeInfo);

                recipeListContainer.appendChild(recipeCard);
            });
        }

        document.addEventListener("DOMContentLoaded", loadRecipes);
    </script>
    
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            fetch("sidebar.html")
                .then(response => response.text())
                .then(data => {
                    document.getElementById("sidebar-placeholder").innerHTML = data;

                    const currentPage = window.location.pathname.split('/').pop();
                    const links = document.querySelectorAll('.customNav-right a');
                    
                    links.forEach(link => {
                        if (link.getAttribute('href') === currentPage) {
                            link.classList.add('active');
                        }
                    });
                });
        });
    </script>
</body>
</html>
